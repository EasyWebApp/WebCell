!function(e){if("function"!=typeof define||!define.amd)return"object"==typeof module?module.exports=e.call(global):this["web-cell"]=e.call(self);define("web-cell",e)}(function(){var l="function"==typeof this.require?this.require:function(e){if(null!=self[e])return self[e];throw ReferenceError("Can't find \""+e+'" module')},s=function include(e,t){o=t,t=/^[^./]/.test(o)?t:"./"+(r=e,n=t,(r+"/"+n).replace(/\/\//g,"/").replace(/[^/.]+\/\.\.\//g,"").replace(/\.\//g,function(e,t,r){return"."===r[t-1]?e:""}));var r,n;var o;var i,a=f[t];if(!a)return l(t);if(!a.exports){a.exports={};for(var u=a.dependency,c=0;u[c];c++)a.dependency[c]=s(u[c]);null!=(i=a.factory.apply(null,a.dependency.concat(include.bind(null,a.base),a.exports,a)))&&(a.exports=i),delete a.dependency,delete a.factory}return a.exports}.bind(null,"./");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||_iterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _decorate(e,t,r){var n=t(function(e){!function _initializeInstanceElements(r,e){["method","field"].forEach(function(t){e.forEach(function(e){e.kind===t&&"own"===e.placement&&_defineClassElement(r,e)})})}(e,o.elements)},r),o=function _decorateClass(e,t){var r=[],n=[],o={"static":[],prototype:[],own:[]};if(e.forEach(function(e){_addElementPlacement(e,o)}),e.forEach(function(e){if(!_hasDecorators(e))return r.push(e);var t=function _decorateElement(e,t){for(var r=[],n=[],o=e.decorators,i=o.length-1;0<=i;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var u=_fromElementDescriptor(e),c=(f=(0,o[i])(u)||u,d=_toElementDescriptor(f),p=_optionalCallableProperty(f,"finisher"),y=_toElementDescriptors(f.extras),{element:d,finisher:p,extras:y});_addElementPlacement(e=c.element,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var s=0;s<l.length;s++)_addElementPlacement(l[s],t);r.push.apply(r,l)}}var f,d,p,y;return{element:e,finishers:n,extras:r}}(e,o);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),!t)return{elements:r,finishers:n};var i=function _decorateConstructor(e,t){for(var r=[],n=t.length-1;0<=n;n--){var o=_fromClassDescriptor(e),i=_toClassDescriptor((0,t[n])(o)||o);if(i.finisher!==undefined&&r.push(i.finisher),i.elements!==undefined){e=i.elements;for(var a=0;a<e.length-1;a++)for(var u=a+1;u<e.length;u++)if(e[a].key===e[u].key&&e[a].placement===e[u].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}}(r,t);return n.push.apply(n,i.finishers),i.finishers=n,i}(function _coalesceClassElements(e){for(var t=[],r=function r(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},n=0;n<e.length;n++){var o,i=e[n];if("method"===i.kind&&(o=t.find(r)))if(_isDataDescriptor(i.descriptor)||_isDataDescriptor(o.descriptor)){if(_hasDecorators(i)||_hasDecorators(o))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");o.descriptor=i.descriptor}else{if(_hasDecorators(i)){if(_hasDecorators(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");o.decorators=i.decorators}_coalesceGetterSetter(i,o)}else t.push(i)}return t}(n.d.map(_createElementDescriptor)),e);return function _initializeClassElements(o,e){var i=o.prototype;["method","field"].forEach(function(n){e.forEach(function(e){var t=e.placement;if(e.kind===n&&("static"===t||"prototype"===t)){var r="static"===t?o:i;_defineClassElement(r,e)}})})}(n.F,o.elements),function _runClassFinishers(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(n!==undefined){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e}(n.F,o.finishers)}function _createElementDescriptor(e){var t;"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===e.kind?"field":"method",key:e.key,placement:e["static"]?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(r.decorators=e.decorators),"field"===e.kind&&(r.initializer=e.value),r}function _coalesceGetterSetter(e,t){e.descriptor.get!==undefined?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return e!==undefined&&!(e.value===undefined&&e.writable===undefined)}function _defineClassElement(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)}function _addElementPlacement(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)}function _fromElementDescriptor(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t}function _toElementDescriptors(e){if(e!==undefined)return function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}(e).map(function(e){var t=_toElementDescriptor(e);return _disallowProperty(e,"finisher","An element descriptor"),_disallowProperty(e,"extras","An element descriptor"),t})}function _toElementDescriptor(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=e.key;"string"!=typeof r&&"symbol"!==_typeof(r)&&(r=String(r));var n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var o=e.descriptor;_disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:r,placement:n,descriptor:Object.assign({},o)};return"field"!==t?_disallowProperty(e,"initializer","A method descriptor"):(_disallowProperty(o,"get","The property descriptor of a field descriptor"),_disallowProperty(o,"set","The property descriptor of a field descriptor"),_disallowProperty(o,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i}function _fromClassDescriptor(e){var t={kind:"class",elements:e.map(_fromElementDescriptor)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t}function _toClassDescriptor(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');_disallowProperty(e,"key","A class descriptor"),_disallowProperty(e,"placement","A class descriptor"),_disallowProperty(e,"descriptor","A class descriptor"),_disallowProperty(e,"initializer","A class descriptor"),_disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:_toElementDescriptors(e.elements),finisher:r}}function _disallowProperty(e,t,r){if(e[t]!==undefined)throw new TypeError(r+" can't have a ."+t+" property.")}function _optionalCallableProperty(e,t){var r=e[t];if(r!==undefined&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(l){return void r(l)}u.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(i){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=i.apply(e,o);function _next(e){asyncGeneratorStep(n,t,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(n,t,r,_next,_throw,"throw",e)}_next(undefined)})}}function _slicedToArray(e,t){return _arrayWithHoles(e)||function _iterableToArrayLimit(e,t){var r=[],n=!0,o=!1,i=undefined;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u["return"]||u["return"]()}finally{if(o)throw i}}return r}(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:undefined;return(_wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function _construct(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f={"./component/InputComponent":{base:"./component",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var n=e("../utility/DOM"),a=e("./Component"),u={readonly:{cursor:"default"},disabled:{cursor:"not-allowed","point-events":"none"}},o=function(e){function InputComponent(e){var t;return _classCallCheck(this,InputComponent),(t=_possibleConstructorReturn(this,_getPrototypeOf(InputComponent).call(this))).buildDOM(e).on.call(t.$("slot")[0],"slotchange",t.linkSlot.bind(_assertThisInitialized(_assertThisInitialized(t)))),t}return _inherits(InputComponent,_wrapNativeSuper(HTMLElement)),_createClass(InputComponent,[{key:"linkSlot",value:function(){var t=this,e=this.$slot("input")[0],r=this.$("input")[0];e.style.setProperty("display","none","important"),n.watchAttributes.call(this,e,["type","name","value","readonly","disabled","checked","placeholder"],this.changedPropertyOf),this.on.call(r,"input",function(){return e.value=r.value}),this.on.call(r,"change",function(e){return t.bubbleOut(e)})}},{key:"changedPropertyOf",value:function(e,t,r){"type"!==e||r||(r="text"),r=a.attributeChanged.call(this.view,e,t,r);var n=u[e];if(n)if(r)for(var o in n)this.style.setProperty("--input-".concat(o),n[o]);else for(var i in n)this.style.removeProperty("--input-".concat(i))}},{key:"defaultValue",get:function(){return this.getAttribute("value")}}]),InputComponent}();t["default"]=o}},"./utility/resource":{base:"./utility",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isXDomain=isXDomain,t.serialize=serialize,t.request=function request(e){return _request.apply(this,arguments)},t.blobOf=blobOf,t.fileTypeOf=function fileTypeOf(e){return _fileTypeOf.apply(this,arguments)},t.blobFrom=function blobFrom(e){var t=_slicedToArray(c.exec(e)||[],5),r=(t[0],t[1]),n=(t[2],t[3]),o=t[4];o=n?window.atob(o):o;for(var i=new ArrayBuffer(o.length),a=new Uint8Array(i),u=0;o[u];u++)a[u]=o.charCodeAt(u);return new Blob([i],{type:r})};var s=e("./object"),f=e("./DOM");function isXDomain(e){return new URL(e,document.baseURI).origin!==window.location.origin}function serialize(e){if((0,f.$)('input[type="file"][name]',e)[0])return new FormData(e);var t=Array.from(e.elements,function(e){return e.name&&[e.name,e.value]}).filter(Boolean);if("application/json"!==(e.form||e).getAttribute("enctype"))return""+new URLSearchParams(t);var r=!0,n=!(e={}),o=undefined;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=_slicedToArray(i.value,2),c=u[0],l=u[1];e[c]=l}}catch(s){n=!0,o=s}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return e}function _request(){return(_request=_asyncToGenerator(regeneratorRuntime.mark(function _callee(r){var n,o,i,a,u,c,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<l.length&&l[1]!==undefined?l[1]:"GET",o=2<l.length?l[2]:undefined,i=3<l.length?l[3]:undefined,a=4<l.length?l[4]:undefined,o instanceof Element&&(o=serialize(o)),o instanceof Object)try{o=JSON.stringify(o.valueOf()),(i=i||{})["Content-Type"]=i["Content-Type"]||"application/json"}catch(t){}return e.next=8,window.fetch(r,(0,s.extend)({method:n,headers:i,body:o,mode:isXDomain(r)?"cors":"same-origin",credentials:"same-origin"},a));case 8:u=e.sent,c=u.headers.get("Content-Type").split(";")[0],e.t0=c,e.next="text/html"===e.t0?13:"application/json"===e.t0?18:21;break;case 13:return e.t1=f.parseDOM,e.next=16,u.text();case 16:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 18:return e.next=20,u.json();case 20:return e.abrupt("return",e.sent);case 21:return e.next=23,u["text"===c.split("/")[0]?"text":"blob"]();case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}},_callee,this)}))).apply(this,arguments)}function blobOf(e){var r=new XMLHttpRequest;return r.responseType="blob",r.open("GET",e),new Promise(function(e,t){r.onload=function(){return e(r.response)},r.onerror=t,r.send()})}var u=/^(?:(\w+):)?.+?(?:\.(\w+))?$/,c=/^data:(.+?\/(.+?))?(;base64)?,(\S+)/;function _fileTypeOf(){return(_fileTypeOf=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=u.exec(t)||[],n=_slicedToArray(r,3),n[0],o=n[1],i=n[2],e.t0=o,e.next="data"===e.t0?4:"blob"===e.t0?5:9;break;case 4:return e.abrupt("return",{schema:"data",type:c.exec(t)[2]});case 5:return e.next=7,blobOf(t);case 7:return a=e.sent,e.abrupt("return",{schema:"blob",type:a.type});case 9:return e.abrupt("return",{schema:o,type:i});case 10:case"end":return e.stop()}},_callee2,this)}))).apply(this,arguments)}}},"./view/ArrayView":{base:"./view",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var n=e("../utility/object"),o=_interopRequireDefault(e("./View")),i=_interopRequireDefault(e("./ObjectView"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var a=[].indexOf,u=_decorate([n.arrayLike],function(o,t){return{F:function(e){function ArrayView(e,t){var r;if(_classCallCheck(this,ArrayView),r=_possibleConstructorReturn(this,_getPrototypeOf(ArrayView).call(this,e,"array",[],t)),o(_assertThisInitialized(_assertThisInitialized(r))),r.booted)return _possibleConstructorReturn(r);var n=e.children[0];return r.template="template"===n.tagName.toLowerCase()?n.content:e.innerHTML,r.clear(),r}return _inherits(ArrayView,t),ArrayView}(),d:[{kind:"method",key:"clear",value:function(){return Array.prototype.splice.call(this,0,Infinity),this.content.innerHTML="",this}},{kind:"method",key:"valueOf",value:function(){return Array.from(this,function(e){return e.valueOf()})}},{kind:"method",key:"update",value:function(){var e=!0,t=!1,r=undefined;try{for(var n,o=this[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.render()}}catch(i){t=!0,r=i}finally{try{e||null==o["return"]||o["return"]()}finally{if(t)throw r}}return this}},{kind:"method",key:"render",value:function(e){var t,r,n=this;if(!e)return this.update();var o=this.data;return(t=this.content).append.apply(t,_toConsumableArray((r=[]).concat.apply(r,_toConsumableArray(Array.from(e,function(e){var t=n[n.length++]=new i["default"](n.template.cloneNode(!0),n);return o[o.length]=t.data,null==e.index&&Object.defineProperty(e,"index",{get:function(){return o.indexOf(this)},enumerable:!0}),t.render(e).content}))))),this}},{kind:"method",key:"push",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.render(t).length}},{kind:"method",key:"indexOf",value:function(e,t){return a.call(this,e,t)}}]}},o["default"]);t["default"]=u}},"./view/View":{base:"./view",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=e("../utility/DOM"),n=new WeakMap,o=new WeakMap,a=new WeakMap,u=new WeakMap,c=function(){function View(e,t,r,n){if(_classCallCheck(this,View),this.constructor===View)throw TypeError('"View" is an abstract class');switch(e.nodeType){case 1:this.name=e.dataset[t];break;case 11:e.parentNode||e.host||(e=_toConsumableArray(e.childNodes));break;default:e=_toConsumableArray(document.importNode((0,i.parseDOM)(e),!0).childNodes)}var o=this.bindWith(e);if(o!==this)return o.booted=!0,o;a.set(this,r),u.set(this,n)}return _createClass(View,[{key:"bindWith",value:function(e){var t,r=this;return e instanceof Array?e=e.filter(function(e){switch(e.nodeType){case 1:(t=o.get(e))||o.set(e,r);break;case 3:if(!e.nodeValue.trim())return}return!0}):(t=o.get(e))||o.set(e,this),n.set(this,e),t||this}},{key:"toString",value:function(){return(0,i.stringifyDOM)(this.content)}},{key:"valueOf",value:function(){throw TypeError("View.prototype.valueOf() must be overwriten")}},{key:"render",value:function(){throw TypeError("View.prototype.render() must be overwriten")}},{key:"clear",value:function(){throw TypeError("View.prototype.clear() must be overwriten")}},{key:"content",get:function(){return n.get(this)}},{key:"data",get:function(){return a.get(this)}},{key:"parent",get:function(){var e=u.get(this);if(e instanceof View)return e;for(var t=this.content[0]||this.content;t=t.parentNode;)if(e=View.instanceOf(t))return u.set(this,e)&&e}},{key:"scope",get:function(){return(this.parent||"").data}},{key:"rootHost",get:function(){for(var e=this;e.parent;)e=e.parent;return e.content.host}}],[{key:"instanceOf",value:function(e){return o.get(e)}}]),View}();t["default"]=c}},"./view/ObjectView":{base:"./view",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var f=e("../utility/object"),d=_interopRequireDefault(e("./View")),p=_interopRequireDefault(e("./Template")),o=e("../utility/DOM"),s=_interopRequireDefault(e("./ArrayView"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var y=new WeakMap,i=new WeakMap,n=_decorate([f.arrayLike],function(n,t){var r,l=function(e){function ObjectView(e,t){var r;return _classCallCheck(this,ObjectView),r=_possibleConstructorReturn(this,_getPrototypeOf(ObjectView).call(this,e,"object",{},t)),n(_assertThisInitialized(_assertThisInitialized(r))),r.booted||(r.length=0,r.scan()),r}return _inherits(ObjectView,t),ObjectView}();return{F:l,d:[{kind:"method",key:"valueOf",value:function(){var e=Object.assign({},this.data),t=!0,r=!1,n=undefined;try{for(var o,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a instanceof d["default"]&&(e[a.name]=a.valueOf())}}catch(u){r=!0,n=u}finally{try{t||null==i["return"]||i["return"]()}finally{if(r)throw n}}return e}},{kind:"method","static":!0,key:"templateOf",value:function(e,t){return new p["default"](e.value||e.nodeValue,["view","scope","host"],t)}},{kind:"method",key:"commit",value:(r=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=i.get(this))||i.set(this,n={}),n[t]=r,e.next=4,(0,o.nextTick)();case 4:if(i.get(this)){e.next=6;break}return e.abrupt("return");case 6:this.render(n),i["delete"](this);case 8:case"end":return e.stop()}},_callee3,this)})),function(e,t){return r.apply(this,arguments)})},{kind:"method",key:"watch",value:function(t,e){var r=this;return t in this?t in Object.getPrototypeOf(this)&&console.warn("Don't overwrite Inset property \"".concat(t,'" !')):Object.defineProperty(this,t,e?{value:e,enumerable:!0}:{get:function(){return r.data[t]},set:function(e){return r.commit(t,e)},enumerable:!0}),this}},{kind:"method",key:"addTemplate",value:function(e,t){if(t[0]){y.set(this[this.length++]=t,e);var r=!0,n=!1,o=undefined;try{for(var i,a=t.reference.get("view")[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;this.watch(u)}}catch(c){n=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}}}},{kind:"method",key:"addView",value:function(e,t){this.watch(e,t)[this.length++]=t}},{kind:"method",key:"parseTag",value:function(n){for(var o=this,i=_toConsumableArray(n.attributes),a=function a(){var e=i[u],t=e.name,r=l.templateOf(e,t in n?function(e){return n[t]=e}:function(e){return n.setAttribute(t,e)});""==r&&n.removeAttribute(t),o.addTemplate(n,r)},u=0;u<i.length;u++)a()}},{kind:"method",key:"scan",value:function(){var n=this,e=this.content;e=e.parentNode?e:{childNodes:e instanceof Array?e:[e]};var t=!0,r=!1,o=undefined;try{for(var i,a=function a(){var t=i.value.node;switch(t.nodeType){case 1:t.dataset.object?n.addView(t.dataset.object,new l(t)):t.dataset.array?n.addView(t.dataset.array,new s["default"](t)):n.parseTag(t);break;case 3:var e=l.templateOf(t,function(e){return t.nodeValue=e}),r=t.parentNode;r.innerHTML.trim()||(e.onChange=function(e){return r.innerHTML=e}),n.addTemplate(r,e)}},u=(0,f.mapTree)(e,"childNodes")[Symbol.iterator]();!(t=(i=u.next()).done);t=!0)a()}catch(c){r=!0,o=c}finally{try{t||null==u["return"]||u["return"]()}finally{if(r)throw o}}}},{kind:"get",key:"scope",value:function(){for(var e=this;e=e.parent;)if(!(e instanceof s["default"]))return e.data}},{kind:"method",key:"render",value:function(e){var t=(0,f.extend)(this.data,e);for(var r in e)this.watch(r);var n=!0,o=!1,i=undefined;try{for(var a,u=this[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,l=c.name;c instanceof p["default"]?c.evaluate(y.get(c),t,this.scope,this.rootHost):c instanceof d["default"]&&(t[l]=c.render(e[l]).data)}}catch(s){o=!0,i=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(o)throw i}}return this}},{kind:"method",key:"clear",value:function(){var e=!0,t=!1,r=undefined;try{for(var n,o=this[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clear()}}catch(i){t=!0,r=i}finally{try{e||null==o["return"]||o["return"]()}finally{if(t)throw r}}return this}}]}},d["default"]);t["default"]=n}},"./utility/object":{base:"./utility",dependency:[],factory:function(e,t,r){var i=regeneratorRuntime.mark(mapTree);function decoratorOf(e,t,r){var n=3<arguments.length&&arguments[3]!==undefined?arguments[3]:{enumerable:!0};return n={key:t,descriptor:n,placement:e instanceof Function?"static":"prototype"},r instanceof Function?(n.kind="method",n.descriptor.value=r):r.constructor===Object&&(r.set||r.get)instanceof Function?(n.kind="method",Object.assign(n.descriptor,r)):(n.kind="field",n.initializer=function(){return r}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.classNameOf=function classNameOf(e){return Object.prototype.toString.call(e).slice(8,-1)},t.getPropertyDescriptor=function getPropertyDescriptor(e,t){var r;e=Object.create(e);for(;e=Object.getPrototypeOf(e);)if(r=Object.getOwnPropertyDescriptor(e,t))return r},t.decoratorOf=decoratorOf,t.toIterable=toIterable,t.arrayLike=function arrayLike(e){var r=e.descriptor;switch(e.kind){case"class":e.elements.push(decoratorOf({},Symbol.iterator,a));break;case"method":for(var n=["value","get"],o=function o(){var e=n[i],t=void 0;(t=r[e])&&(r[e]=function(){return toIterable(t.apply(this,arguments))})},i=0;i<n.length;i++)o()}},t.multipleMap=function multipleMap(e,t){toIterable(e),t=t instanceof Function&&t;var r=[],n=!0,o=!1,i=undefined;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;t&&(c=t(c,0,e)),null!=c&&r.push[c instanceof Array?"apply":"call"](r,c)}}catch(l){o=!0,i=l}finally{try{n||null==u["return"]||u["return"]()}finally{if(o)throw i}}return r},t.extend=function extend(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0;o<r.length;o++){var i=r[o];if(i instanceof Object){for(var a=Object.getOwnPropertyDescriptors(i),u=Object.keys(a),c=0;c<u.length;c++){var l=u[c];"value"in a[l]&&null==a[l].value&&delete a[l]}if(i instanceof Function){delete a.name,delete a.length,delete a.prototype;var s=Object.getOwnPropertyDescriptors(i.prototype);delete s.constructor,Object.defineProperties(e.prototype,s)}Object.defineProperties(e,a)}}return e},t.mapTree=mapTree;var a=[][Symbol.iterator];function toIterable(e){return e[Symbol.iterator]instanceof Function||(e[Symbol.iterator]=a),e}var u=0;function mapTree(t,r){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t[r],u++,o=0;case 3:if(o<n.length)return e.next=6,{parent:t,node:n[o],index:o,depth:u};e.next=11;break;case 6:if(null!=n[o]&&(n[o][r]||"")[0])return e.delegateYield(mapTree(n[o],r),"t0",8);e.next=8;break;case 8:o++,e.next=3;break;case 11:u--;case 12:case"end":return e.stop()}},i,this)}}},"./view/Template":{base:"./view",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var n=_decorate([e("../utility/object").arrayLike],function(f){var d=function d(e,t,r,n){_classCallCheck(this,d),f(this),this.length=0,this.raw=e,this.value=null,t instanceof Function&&(n=r,r=t,t=null),this.varName=t||[],this.reference=new Map;var o=!0,i=!1,a=undefined;try{for(var u,c=["this"].concat(this.varName)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;this.reference.set(l,[])}}catch(s){i=!0,a=s}finally{try{o||null==c["return"]||c["return"]()}finally{if(i)throw a}}this.onChange=r instanceof Function?r:null,this.data=n||[],this.parse().clear()};return{F:d,d:[{kind:"get","static":!0,key:"Expression",value:function(){return/\$\{([\s\S]+?)\}/g}},{kind:"get","static":!0,key:"Reference",value:function(){return/(\w+)(?:\.(\w+)|\[(?:'([^']+)|"([^"]+)))/g}},{kind:"method",key:"push",value:function(){return Array.prototype.push.apply(this,arguments)}},{kind:"method",key:"compile",value:function(e){return this[this.length++]=_construct(Function,_toConsumableArray(this.varName).concat(["return "+e.trim()])),this.length-1}},{kind:"method",key:"parse",value:function(){var i=this,a=function a(e,t,r,n,o){i.reference.has(t)&&i.reference.get(t).push(r||n||o)};return this.raw=this.raw.replace(d.Expression,function(e,t){return t.replace(d.Reference,a),"${"+i.compile(t)+"}"}),this}},{kind:"method",key:"eval",value:function value(e,t,r){try{var value=this[e].apply(t,r);return null!=value?value:""}catch(n){return null!==this.value&&console.warn(n),""}}},{kind:"method",key:"evaluate",value:function value(r){for(var n=this,e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];var value="${0}"!==this.raw?this.raw.replace(/\$\{(\d+)\}/g,function(e,t){return n.eval(t,r,o)}):this.eval(0,r,o);return value!==this.value&&(this.onChange&&this.onChange.apply(this,_toConsumableArray([value,this.value].concat(this.data))),this.value=value),value}},{kind:"method",key:"clear",value:function(){return this.evaluate.apply(this,_toConsumableArray(Array.from(this.reference.entries(),function(e){var t={},r=!0,n=!1,o=undefined;try{for(var i,a=e[1][Symbol.iterator]();!(r=(i=a.next()).done);r=!0){t[i.value]=""}}catch(u){n=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return t})))}},{kind:"method",key:"toString",value:function(){return this.value+""}}]}});t["default"]=n}},"./utility/DOM":{base:"./utility",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.$=$,t.$up=$up,t.mediaReady=function mediaReady(e){return Promise.all($("img[src], iframe[src], audio[src], video[src]",e).map(function(n){if(!o["default"].Expression.test(n.getAttribute("src")))switch(n.tagName.toLowerCase()){case"img":return mediaLoad(n,function(){return n.complete});case"iframe":return new Promise(function(e,t){try{"complete"===n.contentDocument.readyState?e():(n.onload=e,n.onerror=t)}catch(r){e()}});case"audio":case"video":return mediaLoad(n,function(){return 0<n.readyState})}}))},t.indexOf=function indexOf(e){var t=0;for(;e=e.previousElementSibling;)t++;return t},t.targetOf=targetOf,t.delegate=function delegate(r,n){return function(e){var t=targetOf(e);if(t.matches(r)||(t=$up(r,t)),t)return n.call(t,e)}},t.parseDOM=function parseDOM(e){var t=document.createElement("template");return t.innerHTML=e,t.content},t.stringifyDOM=function stringifyDOM(e){return 1===e.nodeType?e.outerHTML:Array.from(e.childNodes||e,function(e){switch(e.nodeType){case 1:return e.outerHTML;case 3:return e.nodeValue}}).join("")},t.watchAttributes=function watchAttributes(c,e,l){var s=this,t=new MutationObserver(function(e){var t=!0,r=!1,n=undefined;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;l.call(s,a.attributeName,a.oldValue,c.getAttribute(a.attributeName))}}catch(u){r=!0,n=u}finally{try{t||null==i["return"]||i["return"]()}finally{if(r)throw n}}});t.observe(c,{attributes:!0,attributeOldValue:!0,attributeFilter:e});var r=!0,n=!1,o=undefined;try{for(var i,a=c.attributes[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;l.call(this,u.name,null,u.value)}}catch(f){n=!0,o=f}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return t},t.delay=function delay(t){return new Promise(function(e){return setTimeout(e,1e3*(t||0))})},t.nextTick=function nextTick(){return n||(n=new Promise(function(t){return window.requestAnimationFrame(function(e){return n=null,t(e)})}))},t.documentReady=void 0;var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(e("../view/Template"));var n,i=new Promise(function(e){document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),function check(){"complete"===document.readyState?e():setTimeout(check)}()});function $(e,t){return _toConsumableArray((t||document).querySelectorAll(e))}function $up(e,t){for(;t.parentNode;)if((t=t.parentNode).matches&&t.matches(e))return t}function mediaLoad(r,n){return new Promise(function(e,t){n()?e():(r.onload=e,r.onerror=t)})}function targetOf(e){return((e.composedPath?e.composedPath():e.path)||"")[0]||e.target}t.documentReady=i}},"./component/Component":{base:"./component",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.linkDataOf=function linkDataOf(e){var r=this,t=!0,n=!1,o=undefined;try{for(var i,a=function a(){var t=i.value;(t=l[t]||t)in r.prototype||Object.defineProperty(r.prototype,t,{set:function(e){this.view.commit(t,e)},get:function(){return this.view.data[t]},enumerable:!0})},u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0)a()}catch(c){n=!0,o=c}finally{try{t||null==u["return"]||u["return"]()}finally{if(n)throw o}}return e},t.attributeChanged=function attributeChanged(e,t,r){switch(e=l[e]||e,r){case"":return this[e]=!0;case null:return this[e]=!1;default:try{return this[e]=JSON.parse(r)}catch(n){return this[e]=r}}},t["default"]=void 0;var n=e("../utility/DOM"),a=_interopRequireDefault(e("../view/ObjectView")),o=_interopRequireDefault(e("../view/View"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var i=function(){function Component(){_classCallCheck(this,Component)}return _createClass(Component,[{key:"buildDOM",value:function(e){ShadyCSS.nativeCss&&ShadyCSS.nativeShadow||ShadyCSS.styleElement(this);var t=this.attachShadow(function _objectSpread(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({mode:"open",delegatesFocus:!0},e)),r=this.constructor,n=r.template,o=r.data;n&&t.appendChild(document.importNode(n,!0));var i=new a["default"](t);return i[0]&&i.render(o),this}},{key:"bubbleOut",value:function(e){return this.shadowRoot.host.dispatchEvent(new e.constructor(e.type,{bubbles:e.bubbles,cancelable:e.cancelable}))}},{key:"$",value:function(e){return(0,n.$)(e,this.shadowRoot)}},{key:"$up",value:function(e){return(0,n.$up)(e,this)}},{key:"$slot",value:function(t){var e;return(e=[]).concat.apply(e,_toConsumableArray(this.$("slot").map(function(e){return e.assignedNodes()}))).filter(function(e){return e.matches&&e.matches(t)})}},{key:"on",value:function(e,t,r){return t instanceof Function&&(r=t,t=""),this.addEventListener(e,t?(0,n.delegate)(t,r):r),this}},{key:"view",get:function(){return o["default"].instanceOf(this.shadowRoot)}}],[{key:"tagName",get:function(){return this.name.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).slice(1)}}]),Component}();t["default"]=i;var l={"class":"className","for":"htmlFor",readonly:"readOnly"}}},"./WebCell":{base:".",dependency:[],factory:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={mapProperty:!0,blobURI:!0,component:!0,Component:!0,attributeChanged:!0,InputComponent:!0,Template:!0,View:!0,ObjectView:!0,ArrayView:!0};t.mapProperty=function mapProperty(e){var t=e.descriptor.get;e.descriptor.get=function(){var e=(0,c.getPropertyDescriptor)(this.prototype,"attributeChangedCallback");return e||Object.defineProperty(this.prototype,"attributeChangedCallback",{value:u.attributeChanged}),u.linkDataOf.call(this,t.call(this))}},t.blobURI=function blobURI(e){var t,r=e.descriptor.get;e.descriptor.get=function(){return t||(t=URL.createObjectURL((0,o.blobFrom)(r.apply(this,arguments))))}},t.component=function component(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},n=e.template,o=e.style,i=e.data,a=e.tagName;return function(e){var t=e.elements,r=(n||o)&&function define(e,t,r){if(t)if(t instanceof Node&&(t=(0,l.stringifyDOM)(t)),"TEMPLATE"!==(t=(0,l.parseDOM)((t+"").trim())).firstChild.tagName){var n=document.createElement("template");n.content.appendChild(t),t=n}else t=t.firstChild;else t=document.createElement("template");e.push((0,c.decoratorOf)(u["default"],"template",t.content)),r&&(r instanceof Node||(r=Object.assign(document.createElement("style"),{textContent:r})),e.push((0,c.decoratorOf)(u["default"],"style",r)),t.content.insertBefore(r,t.content.firstChild));return t}(t,n,o);return i&&t.push((0,c.decoratorOf)(u["default"],"data",i)),decoratorMix(t,u["default"]),decoratorMix(t,u["default"].prototype),{kind:"class",elements:t,finisher:function(e){!r||ShadyCSS.nativeCss&&ShadyCSS.nativeShadow||ShadyCSS.prepareTemplate(r,e.tagName),window.customElements.define(e.tagName,e,a&&{"extends":a})}}}},Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return u["default"]}}),Object.defineProperty(t,"attributeChanged",{enumerable:!0,get:function(){return u.attributeChanged}}),Object.defineProperty(t,"InputComponent",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(t,"Template",{enumerable:!0,get:function(){return a["default"]}}),Object.defineProperty(t,"View",{enumerable:!0,get:function(){return s["default"]}}),Object.defineProperty(t,"ObjectView",{enumerable:!0,get:function(){return f["default"]}}),Object.defineProperty(t,"ArrayView",{enumerable:!0,get:function(){return d["default"]}});var u=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t["default"]=e,t}}(e("./component/Component")),c=e("./utility/object");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});var l=e("./utility/DOM");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var o=e("./utility/resource");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=_interopRequireDefault(e("./component/InputComponent")),a=_interopRequireDefault(e("./view/Template")),s=_interopRequireDefault(e("./view/View")),f=_interopRequireDefault(e("./view/ObjectView")),d=_interopRequireDefault(e("./view/ArrayView"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var p=new Set(Object.getOwnPropertyNames(Function).concat(Object.getOwnPropertyNames(function(){})));function decoratorMix(e,t){var r=t instanceof Function,n=Object.getOwnPropertyDescriptors(t);for(var o in n)(r?p.has(o):"constructor"===o&&n[o].value instanceof Function)||e.push((0,c.decoratorOf)(t,o,n[o].value||n[o]))}p["delete"]("toString")}}};return s("./WebCell")});
//# sourceMappingURL=web-cell.js.map